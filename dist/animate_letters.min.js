/**
 * ~~~ ANIMATE LETTERS JS ~~~
 *
 * Script for wrap letters of a text with a <span> tag
 * and add or remove CSS classes from thoses spans tags.
 *
 * Copyright: Raphaël Castello, 2023
 * Web/contact: www.sns.pm
 * License: GNU AGPL (open source)
 * Script: animate_letters.js
 * Version: 1.0.0
 * GitHub : https://github.com/Raf-sns/Animate-Letters-JS
 */
const animate_letters=(e,t)=>(this.error=!1,document.body.contains(document.querySelector(e))||(console.error("Animate letters : Element "+e+" is not defined, check please ..."),this.error=!0),t&&void 0!==t.add&&void 0!==t.remove||(console.error("Animate letters : Please, provide an object of options"),this.error=!0),t.add.length!=t.remove.length&&(console.error("Animate letters : Please, provide the same number of arrays for adding and removing phases"),this.error=!0),this.prepare=()=>{var r=document.querySelector(e).innerHTML;var s=(r=(r=r.replaceAll(/(<br>)/gm,"ø")).replaceAll(/(&amp;)/gm,"& ")).trim().split(""),n="";s.forEach(((e,r)=>{"ø"==e?n+="<br>":" "==e?n+=e:0!=t.prepare.length?n+='<span class="'+t.prepare+'">'+e+"</span>":n+="<span>"+e+"</span>"})),document.querySelector(e).innerHTML=n},this.Letters=[],this.Indx=0,this.run=()=>{if(!this.error){this.delay_time=0,void 0===t.timers[this.Indx]?(this.increment_delay=100,console.info("Animate letters : No value found for the timer of this phase, the default value was used")):this.increment_delay=t.timers[this.Indx].increment_delay,this.Letters=document.querySelectorAll(e+" span");var r=[];this.Letters.forEach(((e,s)=>{r[s]=setTimeout((function(){clearTimeout(r[s]),0!=t.add[this.Indx].length&&e.classList.add(...t.add[this.Indx]),0!=t.remove[this.Indx].length&&e.classList.remove(...t.remove[this.Indx]),s==this.Letters.length-1&&(this.Indx++,this.end())}),this.delay_time),this.delay_time+=this.increment_delay}))}},this.end=()=>{if(this.Indx<=t.add.length-1)this.run();else{var e=this.Letters.length-1;this.Letters[e].ontransitionend=()=>{"function"==typeof t.end_callBack&&t.end_callBack(),this.remove_spans()},this.Letters[e].onanimationend=()=>{"function"==typeof t.end_callBack&&t.end_callBack(),this.remove_spans()}}},this.remove_spans=()=>{0!=t.clean_after&&this.Letters.forEach(((e,t)=>{e.replaceWith(...e.innerText)}))},this.prepare(),this);
